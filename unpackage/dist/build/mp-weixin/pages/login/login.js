"use strict";const e=require("../../common/vendor.js"),s=require("../../utils/api.js"),o=require("../../utils/auth.js"),n=require("../../common/assets.js");if(require("../../utils/request.js"),require("../../utils/env.js"),!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms")+e.resolveComponent("uni-data-checkbox"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../uni_modules/uni-forms/components/uni-forms/uni-forms.js")+(()=>"../../uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.js")+r)();const r=()=>"../components/abButton.js",a={__name:"login",setup(r){const a=e.reactive({userName:"",password:""}),u=e.index.getStorageSync("userInfo");console.log(u);const i=e.ref(""),t=[{text:"记住密码",value:"1"}];u.userName&&u.password&&(a.userName=u.userName,a.password=u.password,i.value=["1"]);const l=e.ref(null),m=()=>{l.value.validate().then((async n=>{let r=await s.loginApi(a);i.value.length?(e.index.setStorageSync("userInfo",a),o.setToken(r),e.index.reLaunch({url:"/pages/index/index",animationType:"pop-in",animationDuration:200})):e.index.removeStorageSync("userInfo")}))},p={userName:{rules:[{required:!0,errorMessage:"请填写用户名"}]},password:{rules:[{required:!0,errorMessage:"请填写密码"}]}};return(s,o)=>({a:e.unref(n.loginImg),b:e.o((e=>a.userName=e)),c:e.p({type:"text",placeholder:"请输入用户名",modelValue:a.userName}),d:e.p({label:"用户名:",name:"userName"}),e:e.o((e=>a.password=e)),f:e.p({type:"password",placeholder:"请输入密码",modelValue:a.password}),g:e.p({label:"密码:",name:"password"}),h:e.sr(l,"e76005ae-0",{k:"loginForm"}),i:e.p({modelValue:a,rules:p}),j:e.o((e=>i.value=e)),k:e.p({multiple:!0,localdata:t,modelValue:i.value}),l:e.o(m),m:e.p({icon:"auth"})})}};wx.createPage(a);
