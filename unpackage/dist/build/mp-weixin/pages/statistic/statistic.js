"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/api.js");if(require("../../utils/request.js"),require("../../utils/auth.js"),require("../../utils/env.js"),!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("qiun-data-charts"))()}Math||((()=>"../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../uni_modules/uCharts/components/qiun-data-charts/qiun-data-charts.js"))();const t={__name:"statistic",setup(t){const r=e.ref([e.dayjs().subtract(2,"day").format("YYYY-MM-DD"),e.dayjs().format("YYYY-MM-DD")]),s=e.ref(e.dayjs().subtract(12,"month").format("YYYY-MM-DD")),i=e.ref(e.dayjs().format("YYYY-MM-DD")),u=e.ref(0),n=async()=>{let t=await a.chartBarApi({startTime:e.dayjs(r.value[0]).startOf("day").format("YYYY-MM-DD HH:mm:ss"),endTime:e.dayjs(r.value[1]).endOf("day").format("YYYY-MM-DD HH:mm:ss")});console.log(t),o.value={categories:t.bar.times,yAxis:[{type:"value"}],series:[{name:"营业额",type:"line",data:t.bar.values,color:"#fa2c19"}]},u.value=t.bar.totalMoney,l.value={series:[{name:"销售数量",type:"pie",radius:["40%","90%"],top:"10%",avoidLabelOverlap:!1,data:t.pie}]}};e.onShow((async()=>{await n()})),e.watch(r,(()=>{n()}));const o=e.ref({}),l=e.ref({}),c=e.ref(null),d=e.ref(null);return e.onMounted((()=>{n()})),(a,t)=>({a:e.o((e=>r.value=e)),b:e.p({type:"daterange",start:s.value,end:i.value,rangeSeparator:"至",modelValue:r.value}),c:e.t(u.value),d:e.sr(c,"c56b8b92-1",{k:"chartDomBar"}),e:e.p({opts:{dataLabel:!1,extra:{line:{type:"curve"}},legend:{show:!1}},type:"line",chartData:o.value}),f:e.sr(d,"c56b8b92-2",{k:"chartDomPie"}),g:e.p({type:"pie",chartData:l.value})})}};wx.createPage(t);
